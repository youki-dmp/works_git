## 2026-01-19 (Update 3)
- **メッシュの最適化 / Mesh Optimization**:
  - メッシュ変形を顔の範囲（Face Bounds）に限定し、肩や背景の歪みを解消。
  - レンダリングを「ベース画像 + 顔部分のメッシュ上書き」の2層構造に変更。
- **UI/UXの改善 / UI Refinement**:
  - すべての項目を日本語に翻訳。
  - 「位置合わせ」ボタンをメインパネルの中央に配置し、常に操作可能に変更。
- **アニメーションの不具合修正 / Animation Bug Fix**:
  - メッシュ変形の行列演算（アフィン変換）を修正し、描画のズレを解消。
  - 変形範囲をキャリブレーション時のランドマークから動的に取得するように変更。
  - 口の開閉、笑顔、瞬きの変形強度を大幅に強化。
  - `index.html`, `style.css`, `app.js` の基盤作成。
- **基本機能の実装 / Core Features**:
  - **MediaPipe Face Landmarker** による顔の向き推定と瞬き検知の実装。
  - **Web Audio API** によるマイク音量検知（跳ねるアニメーション）と波形表示の実装。
- **機能拡張 Phase 1 (案2的アプローチ)# 更新記録 / Development Log - item_camera01_model

## 2026-01-20 (Update 14)
- **キャリブレーション精度とアライメントの修正 / Calibration & Alignment Fix**:
  - ユーザーがカメラの端にいても、イラストの表情パーツ（目・口）を正確に捉えられるように座標マッピングを刷新。
  - 頭の回転・移動・拡大縮小をすべて「キャリブレーション時の姿勢」をゼロ地点として計算するように変更。
  - 片目しか閉じない、口が動かない、といったマッピングのズレによる不具合を解消。

## 2026-01-20 (Update 13)
- **メッシュ変形の極小化（パーツ限定適用） / Micro-Localized Blending**:
  - 表情の補完（クロスフェード）を、顔全体ではなく「目と口の直近」のみに限定。
  - 髪の毛や輪郭、服などの質感を100%維持したまま、パーツだけを滑らかに動かすことに成功。
  - グリッド密度をさらに向上（30x30）させ、境界線の違和感を解消。

## 2026-01-19 (Update 12)
- **高度な追従機能の実装 / Advanced Body Tracking**:
  - **奥行き（Z軸）**: 前後に動くとキャラクターが拡大縮小する機能を追加。
  - **平行移動（X/Y軸）**: 上下左右の動きに合わせてキャラクターが画面内を移動。
  - **体のねじれ（リーン）**: 顔の向きに合わせて体が自然に傾く「ねじれ」エフェクトを追加。
- **メッシュ表示の同期 / UI & Grid Sync**:
  - デバッグメッシュの密度を25x25に同期し、実際の変形範囲を正確に視認可能に改善。

## 2026-01-19 (Update 11)
- **メッシュ密度と判定範囲の改善 / Improved Mesh & Detection**:
  - メッシュ密度を10x10から25x25に向上。より細やかな表情の変化が可能に。
  - 顔の判定範囲（Face Bounds）の下方向（顎側）を大幅に拡張。口の下側が見切れる不具合を修正。
  - 遷移曲線を再調整し、よりアニメーションらしいメリハリと滑らかさを両立。

## 2026-01-19 (Update 10)
- **スプライトシート描画の修正 / Sprite Sheet Fix**:
  - 顔以外の範囲で画像全体（4枚分）が表示されてしまうバグを修正。通常時は左上のセルのみを正しく参照するようにUVマッピングを調整。

## 2026-01-19 (Update 9)
- **UIの整理とバグ修正 / UI Cleanup & Bug Fix**:
  - 重複していた画像アップロード欄を1箇所に統合し、モード選択に応じて動的に変化するように整理。
  - 同じIDが複数存在していたことによる画像読み込みの不具合を修正。
  - メイン画像の読み込みが完了した際に正しくフラグが立つようにロジックを改善。

## 2026-01-19 (Update 8)
- **表情の「コマ補完」機能の実装 / Smooth Frame Interpolation**:
  - 目や口の切り替えをパチパチとしたスナップ方式から、じわっと変化するクロスフェード方式に変更。
  - トラッキングデータのEMA平滑化により、小刻みな震え（ジッタ）を抑制し、動きを滑らかにしました。
  - スプライトシート/複数画像モードの両方で、「半開き」「半閉じ」のような中間の状態が表現可能になりました。

## 2026-01-19 (Update 7)
- **描画バグの修正 / Alignment Fix**:
  - メッシュ範囲が「顔」に限定されていたため、1枚絵モードで体が消えたりズレたりする問題を修正。
  - メッシュを画像全体（0.0〜1.0）に適用し、キャラクター全体が正しく回転・表示されるように修正。
- **UIの復元 / UI Restoration**:
  - モード選択メニューから消えていた「スプライトシート (2x2)」オプションを復旧。

## 2026-01-19 (Update 6)
- **複数画像アップロードへの対応 / Multi-Image Support**:
  - スプライトシート形式だけでなく、4枚の独立した画像をアップロードして切り替えるモードを追加。
- **UI/UXの改善 / UI Refinement**:
  - モード選択用セレクトメニューの実装。選択中のモードに合わせて入力欄を動的に表示するように変更。
- **レンダリングの修正 / Rendering Fix**:
  - スプライトシートでの配置ズレを修正。また、複数画像モードでも擬似3D変形を正しく適用。

## 2026-01-19 (Update 5)
- **B案：スプライトシート方式の導入 / Plan B Implementation**:
  - メッシュ変形による表情（口・目）を廃止し、画像の描き分けによる切り替え方式を採用。
  - 2x2のグリッド形式（通常、瞬き、喋り、両方）をサポート。
  - 1枚絵使用時は、変形を無効化して安定性を向上（ダウングレード）。

## 2026-01-19 (Update 4)
- **「癒着」と「歪み」の解消 / Improved Deformation**:
  - 頭を大きく傾けた際に顔が歪みすぎる問題を、行列の制限（Stabilize）により解消。
  - **口を閉じる動作のサポート**: 元々口が開いているイラストでも、ユーザーが口を閉じればメッシュを圧縮して閉じるように修正。
  - **視線追従（黒目の動き）**: 目のランドマークを細分化し、キョロキョロと目を動かせる仕組みを導入。
  - イラストの上に「まぶた」や「口」の図形を描画する暫定的なアニメーションを実装。
- **高度なメッシュ変形の実装 (案1) / Advanced Mesh Warping (Option 1)**:
  - キャリブレーション機能の追加。
  - イラスト自体を動かす **10x10 三角形メッシュ変形エンジン** を Canvas 2D アフィン変換で構築。
  - `jawOpen`（口の開き）、`mouthSmile`（笑顔）、`eyeBlink`（瞬き）に基づくリアルタイムなテクスチャ変形。
- **ドキュメント作成 / Documentation**:
  - `CHANGELOG.md` および `MANUAL.md` を作成。

## 2026-01-18
- **企画・調査 / Planning & Research**:
  - 1枚のPNG画像でWebカメラ・音声に連動するPNGTuberアプリの企画。
  - 既存のMediaPipeを用いたGitHubプロジェクトの調査。
